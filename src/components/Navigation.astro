---
import { Image } from 'astro:assets';
import { getEntry } from 'astro:content';
import { Github } from '@lucide/astro';
import ToggleTheme from './ToggleTheme.astro';
import Logo from '../assets/logo-0.webp';

const entry = await getEntry('canales', 'redes');
if (!entry) {
    throw new Error('No se encontró la entrada de contenido para canales/redes');
}
const discordLink = entry.data.find((canal) => canal.nombre === 'Discord')?.url || '#';
const githubLink = entry.data.find((canal) => canal.nombre === 'GitHub')?.url || '#';

const navLinks = [
    { name: 'Inicio', href: '/' },
    { name: 'Proyectos', href: '/proyectos' },
    { name: 'Nosotros', href: '/nosotros' },
    { name: 'Contacto', href: '/contacto' },
    { name: 'Código de conducta', href: '/codigo-de-conducta' },
];
---

<header
    class="navbar fixed top-0 left-0 right-0 z-50 border-b border-base-100/20 bg-base-100/80 px-4 shadow-md backdrop-blur-xl lg:px-20"
>
    <div class="navbar-start">
        <div class="dropdown lg:hidden">
            <div role="button" tabindex="0" class="btn btn-ghost btn-circle mr-2" aria-label="Menu">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M4 6h16M4 12h16M4 18h7"></path>
                </svg>
            </div>
            <ul
                class="menu menu-sm dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-52 p-2 shadow-lg border border-base-content/10"
            >
                {
                    navLinks.map((link) => (
                        <li>
                            <a href={link.href}>{link.name}</a>
                        </li>
                    ))
                }
            </ul>
        </div>

        <a href="/" class="flex cursor-pointer items-center space-x-2 select-none">
            <Image
                src={Logo}
                alt="Logo"
                loading="eager"
                fetchpriority="high"
                width={128}
                height={128}
                class="h-10 w-10"
            />
            <span class="font-heading text-xl font-bold">Lyoss</span>
        </a>
    </div>

    <div class="navbar-center hidden lg:flex">
        <ul class="menu menu-horizontal px-1">
            {
                navLinks.map((link) => (
                    <li>
                        <a href={link.href}>{link.name}</a>
                    </li>
                ))
            }
        </ul>
    </div>

    <div class="navbar-end">
        <div class="flex items-center space-x-2">
            <ToggleTheme />

            <a href={githubLink} target="_blank" class="btn btn-circle btn-ghost" aria-label="GitHub">
                <Github class="h-5 w-5" />
            </a>

            <a href={discordLink} target="_blank" class="btn btn-circle btn-ghost" aria-label="Discord">
                <svg class="h-5 w-5" viewBox="0 0 16 16"
                    ><path
                        fill="currentColor"
                        d="M13.554 3.016A13.2 13.2 0 0 0 10.253 2a9 9 0 0 0-.423.86a12.3 12.3 0 0 0-3.664 0A9 9 0 0 0 5.744 2A13.4 13.4 0 0 0 2.44 3.018C.351 6.108-.215 9.123.068 12.094a13.3 13.3 0 0 0 4.048 2.033a10 10 0 0 0 .867-1.399a8.6 8.6 0 0 1-1.365-.652q.173-.126.335-.251a9.51 9.51 0 0 0 8.094 0q.165.136.335.251a8.7 8.7 0 0 1-1.368.654a9.7 9.7 0 0 0 .867 1.396a13.3 13.3 0 0 0 4.051-2.03c.332-3.446-.568-6.433-2.379-9.08m-8.212 7.25c-.789 0-1.44-.715-1.44-1.596S4.53 7.067 5.34 7.067s1.456.722 1.442 1.603c-.014.88-.636 1.597-1.44 1.597m5.316 0c-.79 0-1.44-.715-1.44-1.596s.63-1.603 1.44-1.603s1.452.722 1.438 1.603c-.014.88-.634 1.597-1.438 1.597"
                    ></path></svg
                >
            </a>
        </div>
    </div>
</header>